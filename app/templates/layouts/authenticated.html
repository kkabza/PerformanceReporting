{% extends "base.html" %}

{% block content %}
<!-- Static sidebar for desktop -->
<div class="hidden lg:fixed lg:inset-y-0 lg:flex lg:w-56 lg:flex-col">
    <div class="flex min-h-0 flex-1 flex-col border-r border-gray-200 bg-gray-800">
        <div class="flex flex-1 flex-col overflow-y-auto pt-5 pb-4">
            <div class="flex flex-shrink-0 items-center px-4">
                <span class="text-white text-xl font-semibold">Performance Portal</span>
            </div>
            <nav class="mt-5 flex-1 space-y-1 bg-gray-800 px-2">
                <!-- Dashboard -->
                <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-white bg-gray-900">
                    <i class="fas fa-home mr-4 text-gray-300"></i>
                    Dashboard
                </a>

                <!-- Performance Tests Section -->
                <div class="space-y-1">
                    <button onclick="toggleSubmenu('tests-submenu')" class="w-full flex items-center justify-between px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white group">
                        <div class="flex items-center">
                            <i class="fas fa-vial mr-4 text-gray-400"></i>
                            Performance Tests
                        </div>
                        <i class="fas fa-chevron-down text-gray-400 text-sm transition-transform duration-200" id="tests-submenu-icon"></i>
                    </button>
                    <div id="tests-submenu" class="pl-10 space-y-1">
                        <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-tasks mr-3 text-gray-400"></i>
                            Test Plans
                        </a>
                        <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-clipboard-check mr-3 text-gray-400"></i>
                            Test Cases
                        </a>
                        <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-exclamation-triangle mr-3 text-gray-400"></i>
                            Test Errors
                        </a>
                        <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-bug mr-3 text-gray-400"></i>
                            Bugs
                        </a>
                        <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-columns mr-3 text-gray-400"></i>
                            Test Board
                        </a>
                    </div>
                </div>

                <!-- Testers Section -->
                <div class="space-y-1">
                    <button onclick="toggleSubmenu('testers-submenu')" class="w-full flex items-center justify-between px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white group">
                        <div class="flex items-center">
                            <i class="fas fa-users mr-4 text-gray-400"></i>
                            Team Members
                        </div>
                        <i class="fas fa-chevron-down text-gray-400 text-sm transition-transform duration-200" id="testers-submenu-icon"></i>
                    </button>
                    <div id="testers-submenu" class="pl-10 space-y-1">
                        <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-user mr-3 text-gray-400"></i>
                            Testers
                        </a>
                        <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-users-cog mr-3 text-gray-400"></i>
                            Users
                        </a>
                    </div>
                </div>

                <!-- DevOps Section -->
                <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                    <i class="fas fa-code-branch mr-4 text-gray-400"></i>
                    DevOps
                </a>

                <!-- App Insights Section -->
                <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                    <i class="fas fa-chart-line mr-4 text-gray-400"></i>
                    App Insights
                </a>

                <!-- Debug Section -->
                <div class="space-y-1">
                    <button onclick="toggleSubmenu('debug-submenu')" class="w-full flex items-center justify-between px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white group">
                        <div class="flex items-center">
                            <i class="fas fa-bug mr-4 text-gray-400"></i>
                            Debug
                        </div>
                        <i class="fas fa-chevron-down text-gray-400 text-sm transition-transform duration-200" id="debug-submenu-icon"></i>
                    </button>
                    <div id="debug-submenu" class="pl-10 space-y-1">
                        <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-chart-bar mr-3 text-gray-400"></i>
                            Grafana
                        </a>
                    </div>
                </div>

                <!-- Settings Section -->
                <div class="space-y-1">
                    <a href="{{ url_for('settings.general') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                        <i class="fas fa-cog mr-4 text-gray-400"></i>
                        General Settings
                    </a>
                    <a href="{{ url_for('settings.preferences') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                        <i class="fas fa-user-cog mr-4 text-gray-400"></i>
                        User Preferences
                    </a>
                </div>
            </nav>
        </div>
    </div>
</div>

<!-- Main content -->
<div class="lg:pl-56 flex flex-col flex-1">
    <!-- Top navigation -->
    <div class="sticky top-0 z-10 flex h-16 flex-shrink-0 bg-white shadow">
        <button type="button" class="border-r border-gray-200 px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 lg:hidden" onclick="toggleMobileMenu()">
            <span class="sr-only">Open sidebar</span>
            <i class="fas fa-bars"></i>
        </button>
        <div class="flex flex-1 justify-between px-4">
            <div class="flex flex-1">
                <form class="w-full flex lg:ml-0 lg:w-96">
                    <label for="search-field" class="sr-only">Search</label>
                    <div class="relative w-full text-gray-400 focus-within:text-gray-600">
                        <div class="absolute inset-y-0 left-0 flex items-center pointer-events-none">
                            <i class="fas fa-search"></i>
                        </div>
                        <input id="search-field" class="block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-0 focus:border-transparent sm:text-sm" placeholder="Search" type="search">
                    </div>
                </form>
            </div>
            <div class="ml-4 flex items-center md:ml-6">
                <button type="button" class="bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <span class="sr-only">View notifications</span>
                    <i class="fas fa-bell"></i>
                </button>
                <!-- Profile dropdown -->
                <div class="relative ml-3">
                    <div>
                        <button type="button" class="flex max-w-xs items-center rounded-full bg-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" onclick="toggleProfileMenu()">
                            <span class="sr-only">Open user menu</span>
                            <i class="fas fa-user-circle text-gray-400 text-2xl"></i>
                        </button>
                    </div>
                    <!-- Profile dropdown menu -->
                    <div id="profile-menu" class="absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Your Profile</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                        <a href="{{ url_for('auth.logout') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <i class="fas fa-sign-out-alt mr-2"></i>
                            Sign out
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile menu -->
    <div id="mobile-menu" class="fixed inset-0 z-40 lg:hidden hidden">
        <!-- Overlay -->
        <div class="fixed inset-0 bg-gray-600 bg-opacity-75" onclick="toggleMobileMenu()"></div>
        <!-- Sidebar -->
        <div class="fixed inset-y-0 left-0 flex w-56 flex-col bg-gray-800">
            <div class="flex min-h-0 flex-1 flex-col overflow-y-auto pt-5 pb-4">
                <div class="flex flex-shrink-0 items-center px-4">
                    <span class="text-white text-xl font-semibold">Performance Portal</span>
                </div>
                <nav class="mt-5 flex-1 space-y-1 bg-gray-800 px-2">
                    <!-- Dashboard -->
                    <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-white bg-gray-900">
                        <i class="fas fa-home mr-4 text-gray-300"></i>
                        Dashboard
                    </a>

                    <!-- Performance Tests Section -->
                    <div class="space-y-1">
                        <button onclick="toggleSubmenu('mobile-tests-submenu')" class="w-full flex items-center justify-between px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white group">
                            <div class="flex items-center">
                                <i class="fas fa-vial mr-4 text-gray-400"></i>
                                Performance Tests
                            </div>
                            <i class="fas fa-chevron-down text-gray-400 text-sm transition-transform duration-200" id="mobile-tests-submenu-icon"></i>
                        </button>
                        <div id="mobile-tests-submenu" class="pl-10 space-y-1">
                            <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                                <i class="fas fa-tasks mr-3 text-gray-400"></i>
                                Test Plans
                            </a>
                            <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                                <i class="fas fa-clipboard-check mr-3 text-gray-400"></i>
                                Test Cases
                            </a>
                            <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                                <i class="fas fa-exclamation-triangle mr-3 text-gray-400"></i>
                                Test Errors
                            </a>
                            <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                                <i class="fas fa-bug mr-3 text-gray-400"></i>
                                Bugs
                            </a>
                            <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                                <i class="fas fa-columns mr-3 text-gray-400"></i>
                                Test Board
                            </a>
                        </div>
                    </div>

                    <!-- Testers Section -->
                    <div class="space-y-1">
                        <button onclick="toggleSubmenu('mobile-testers-submenu')" class="w-full flex items-center justify-between px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white group">
                            <div class="flex items-center">
                                <i class="fas fa-users mr-4 text-gray-400"></i>
                                Team Members
                            </div>
                            <i class="fas fa-chevron-down text-gray-400 text-sm transition-transform duration-200" id="mobile-testers-submenu-icon"></i>
                        </button>
                        <div id="mobile-testers-submenu" class="pl-10 space-y-1">
                            <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                                <i class="fas fa-user mr-3 text-gray-400"></i>
                                Testers
                            </a>
                            <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                                <i class="fas fa-users-cog mr-3 text-gray-400"></i>
                                Users
                            </a>
                        </div>
                    </div>

                    <!-- DevOps Section -->
                    <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                        <i class="fas fa-code-branch mr-4 text-gray-400"></i>
                        DevOps
                    </a>

                    <!-- App Insights Section -->
                    <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                        <i class="fas fa-chart-line mr-4 text-gray-400"></i>
                        App Insights
                    </a>

                    <!-- Debug Section -->
                    <div class="space-y-1">
                        <button onclick="toggleSubmenu('mobile-debug-submenu')" class="w-full flex items-center justify-between px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white group">
                            <div class="flex items-center">
                                <i class="fas fa-bug mr-4 text-gray-400"></i>
                                Debug
                            </div>
                            <i class="fas fa-chevron-down text-gray-400 text-sm transition-transform duration-200" id="mobile-debug-submenu-icon"></i>
                        </button>
                        <div id="mobile-debug-submenu" class="pl-10 space-y-1">
                            <a href="{{ url_for('home.dashboard') }}" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                                <i class="fas fa-chart-bar mr-3 text-gray-400"></i>
                                Grafana
                            </a>
                        </div>
                    </div>

                    <!-- Settings Section -->
                    <div class="space-y-1">
                        <a href="{{ url_for('settings.general') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-cog mr-4 text-gray-400"></i>
                            General Settings
                        </a>
                        <a href="{{ url_for('settings.preferences') }}" class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-gray-700 hover:text-white">
                            <i class="fas fa-user-cog mr-4 text-gray-400"></i>
                            User Preferences
                        </a>
                    </div>
                </nav>
            </div>
        </div>
    </div>

    <!-- Page content -->
    {% block page_content %}{% endblock %}
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
function toggleProfileMenu() {
    const menu = document.getElementById('profile-menu');
    menu.classList.toggle('hidden');
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    menu.classList.toggle('hidden');
}

function toggleSubmenu(submenuId) {
    const submenu = document.getElementById(submenuId);
    const icon = document.getElementById(submenuId + '-icon');
    submenu.classList.toggle('hidden');
    icon.classList.toggle('rotate-180');
}

// Close profile menu when clicking outside
document.addEventListener('click', function(event) {
    const menu = document.getElementById('profile-menu');
    const button = event.target.closest('button');
    if (!button && !menu.contains(event.target)) {
        menu.classList.add('hidden');
    }
});

// Initialize submenus to be expanded by default
document.addEventListener('DOMContentLoaded', function() {
    const submenus = [
        'tests-submenu',
        'mobile-tests-submenu',
        'testers-submenu',
        'mobile-testers-submenu',
        'debug-submenu',
        'mobile-debug-submenu'
    ];
    submenus.forEach(submenuId => {
        const submenu = document.getElementById(submenuId);
        if (submenu) {
            submenu.classList.remove('hidden');
        }
    });
});
</script>
{% endblock %} 